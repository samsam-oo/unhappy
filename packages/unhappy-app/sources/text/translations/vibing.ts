import type { SupportedLanguage } from '../_all';

export const VIBING_MESSAGE_COUNT = 87;

type VibeLexicon = {
    tones: readonly string[];
    actions: readonly string[];
};

function buildVibingMessages(tones: readonly string[], actions: readonly string[]): string[] {
    const out: string[] = [];
    for (const tone of tones) {
        for (const action of actions) {
            out.push(`${tone} ${action}`.trim());
        }
    }
    if (out.length === 0) {
        return Array.from({ length: VIBING_MESSAGE_COUNT }, () => 'working');
    }
    const seed = out.slice();
    while (out.length < VIBING_MESSAGE_COUNT) {
        out.push(seed[out.length % seed.length]);
    }
    return out.slice(0, VIBING_MESSAGE_COUNT);
}

const VIBING_LEXICON: Record<SupportedLanguage, VibeLexicon> = {
    en: {
        tones: ['calmly', 'deeply', 'playfully'],
        actions: [
            'planning',
            'sketching',
            'calculating',
            'brewing ideas',
            'polishing',
            'building',
            'crafting',
            'tuning',
            'debugging',
            'imagining',
            'connecting dots',
            'synthesizing',
            'iterating',
            'exploring',
            'testing',
            'refining',
            'optimizing',
            'figuring it out',
            'organizing',
            'reviewing',
            'shaping',
            'balancing',
            'solving',
            'decoding',
            'composing',
            'prototyping',
            'calibrating',
            'wrapping up',
            'shipping',
        ],
    },
    ru: {
        tones: ['спокойно', 'вдумчиво', 'с огоньком'],
        actions: [
            'планируем',
            'набросываем идеи',
            'считаем варианты',
            'завариваем идеи',
            'шлифуем детали',
            'собираем решение',
            'мастерим',
            'подкручиваем',
            'отлаживаем',
            'воображаем',
            'связываем точки',
            'синтезируем',
            'итеративно улучшаем',
            'исследуем',
            'проверяем',
            'дорабатываем',
            'оптимизируем',
            'разбираемся',
            'наводим порядок',
            'перепроверяем',
            'формируем',
            'выравниваем',
            'решаем задачу',
            'расшифровываем',
            'сочиняем',
            'прототипируем',
            'калибруем',
            'доводим до финала',
            'выпускаем',
        ],
    },
    pl: {
        tones: ['spokojnie', 'uważnie', 'na luzie'],
        actions: [
            'planujemy',
            'szkicujemy pomysły',
            'liczymy warianty',
            'warzymy pomysły',
            'szlifujemy detale',
            'budujemy rozwiązanie',
            'tworzymy',
            'dostrajamy',
            'debugujemy',
            'wyobrażamy sobie',
            'łączymy kropki',
            'syntetyzujemy',
            'iterujemy',
            'eksplorujemy',
            'testujemy',
            'udoskonalamy',
            'optymalizujemy',
            'rozgryzamy temat',
            'porządkujemy',
            'przeglądamy',
            'kształtujemy',
            'równoważymy',
            'rozwiązujemy',
            'odszyfrowujemy',
            'komponujemy',
            'prototypujemy',
            'kalibrujemy',
            'domykamy',
            'wdrażamy',
        ],
    },
    es: {
        tones: ['tranquilamente', 'a fondo', 'con flow'],
        actions: [
            'planificamos',
            'bocetamos ideas',
            'calculamos opciones',
            'cocinamos ideas',
            'pulimos detalles',
            'construimos',
            'creamos',
            'ajustamos',
            'depuramos',
            'imaginamos',
            'unimos puntos',
            'sintetizamos',
            'iteramos',
            'exploramos',
            'probamos',
            'refinamos',
            'optimizamos',
            'desciframos',
            'organizamos',
            'revisamos',
            'damos forma',
            'equilibramos',
            'resolvemos',
            'decodificamos',
            'componemos',
            'prototipamos',
            'calibramos',
            'cerramos flecos',
            'lanzamos',
        ],
    },
    it: {
        tones: ['con calma', 'a fondo', 'con buona energia'],
        actions: [
            'pianifichiamo',
            'abbozziamo idee',
            'calcoliamo opzioni',
            'facciamo sobbollire le idee',
            'rifiniamo i dettagli',
            'costruiamo',
            'creiamo',
            'mettiamo a punto',
            'facciamo debug',
            'immaginiamo',
            'colleghiamo i puntini',
            'sintetizziamo',
            'iteriamo',
            'esploriamo',
            'testiamo',
            'raffiniamo',
            'ottimizziamo',
            'decifriamo',
            'organizziamo',
            'rivediamo',
            'diamo forma',
            'bilanciamo',
            'risolviamo',
            'decodifichiamo',
            'componiamo',
            'prototipiamo',
            'calibriamo',
            'chiudiamo gli ultimi dettagli',
            'rilasciamo',
        ],
    },
    pt: {
        tones: ['com calma', 'no foco', 'na vibe'],
        actions: [
            'planejamos',
            'esboçamos ideias',
            'calculamos opções',
            'cozinhamos ideias',
            'lapidamos detalhes',
            'construímos',
            'criamos',
            'ajustamos',
            'depuramos',
            'imaginamos',
            'ligamos os pontos',
            'sintetizamos',
            'iteramos',
            'exploramos',
            'testamos',
            'refinamos',
            'otimizamos',
            'deciframos',
            'organizamos',
            'revisamos',
            'damos forma',
            'equilibramos',
            'resolvemos',
            'decodificamos',
            'compomos',
            'prototipamos',
            'calibramos',
            'fechamos os detalhes',
            'lançamos',
        ],
    },
    ca: {
        tones: ['amb calma', 'a fons', 'amb bona vibra'],
        actions: [
            'planifiquem',
            'esbossem idees',
            'calculem opcions',
            'coem idees',
            'polim detalls',
            'construïm',
            'creem',
            'afinem',
            'depurem',
            'imaginem',
            'lliguem caps',
            'sintetitzem',
            'iterem',
            'explorem',
            'provem',
            'refinem',
            'optimitzem',
            'desxifrem',
            'organitzem',
            'revisem',
            'donem forma',
            'equilibrem',
            'resolem',
            'descodifiquem',
            'componem',
            'prototipem',
            'calibrem',
            'tanquem serrells',
            'llancem',
        ],
    },
    'zh-Hans': {
        tones: ['稳稳地', '专注地', '带点灵感地'],
        actions: [
            '规划中',
            '打草稿中',
            '测算中',
            '酝酿想法中',
            '打磨细节中',
            '构建中',
            '创作中',
            '微调中',
            '调试中',
            '想象中',
            '串联线索中',
            '综合中',
            '迭代中',
            '探索中',
            '测试中',
            '精修中',
            '优化中',
            '拆解中',
            '整理中',
            '复查中',
            '成型中',
            '平衡中',
            '解题中',
            '解码中',
            '编排中',
            '原型验证中',
            '校准中',
            '收尾中',
            '发布中',
        ],
    },
    'zh-Hant': {
        tones: ['穩穩地', '專注地', '帶點靈感地'],
        actions: [
            '規劃中',
            '打草稿中',
            '測算中',
            '醞釀想法中',
            '打磨細節中',
            '建構中',
            '創作中',
            '微調中',
            '除錯中',
            '想像中',
            '串聯線索中',
            '整合中',
            '迭代中',
            '探索中',
            '測試中',
            '精修中',
            '優化中',
            '拆解中',
            '整理中',
            '複查中',
            '成形中',
            '平衡中',
            '解題中',
            '解碼中',
            '編排中',
            '原型驗證中',
            '校準中',
            '收尾中',
            '發布中',
        ],
    },
    ja: {
        tones: ['落ち着いて', 'じっくり', 'ノリよく'],
        actions: [
            '計画中',
            '下書き中',
            '試算中',
            'アイデア発酵中',
            '細部調整中',
            '構築中',
            '制作中',
            'チューニング中',
            'デバッグ中',
            '想像中',
            '点と点を接続中',
            '統合中',
            '反復改善中',
            '探索中',
            '検証中',
            '磨き込み中',
            '最適化中',
            '読み解き中',
            '整理中',
            '見直し中',
            '形にしているところ',
            'バランス調整中',
            '解決中',
            'デコード中',
            '構成中',
            'プロトタイプ作成中',
            'キャリブレーション中',
            '仕上げ中',
            'リリース準備中',
        ],
    },
    ko: {
        tones: ['차분히', '집중해서', '신나게'],
        actions: [
            '구상 중',
            '초안 잡는 중',
            '계산 중',
            '아이디어 숙성 중',
            '디테일 다듬는 중',
            '구성 중',
            '창작 중',
            '미세 조정 중',
            '디버깅 중',
            '상상 중',
            '점 연결 중',
            '통합 중',
            '반복 개선 중',
            '탐색 중',
            '검증 중',
            '고도화 중',
            '최적화 중',
            '해석 중',
            '정리 중',
            '재검토 중',
            '형태 잡는 중',
            '균형 맞추는 중',
            '해결 중',
            '디코딩 중',
            '구성 편집 중',
            '프로토타이핑 중',
            '보정 중',
            '마무리 중',
            '배포 준비 중',
        ],
    },
};

export const VIBING_MESSAGES_BY_LANGUAGE: Record<SupportedLanguage, readonly string[]> = (
    Object.entries(VIBING_LEXICON) as Array<[SupportedLanguage, VibeLexicon]>
).reduce((acc, [language, lexicon]) => {
    acc[language] = buildVibingMessages(lexicon.tones, lexicon.actions);
    return acc;
}, {} as Record<SupportedLanguage, readonly string[]>);

if (__DEV__) {
    for (const [language, messages] of Object.entries(VIBING_MESSAGES_BY_LANGUAGE) as Array<[SupportedLanguage, readonly string[]]>) {
        if (messages.length !== VIBING_MESSAGE_COUNT) {
            console.warn(`[sessionStatus] vibing message count mismatch for ${language}: ${messages.length}`);
        }
    }
}
